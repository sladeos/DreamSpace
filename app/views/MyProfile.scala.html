@(profile: Profile, tournament: List[Tournament])


<!DOCTYPE html>

<html>
    <head>
     
      @Templates.head()
      
        
        <script type="text/javascript" src="@routes.Assets.at("stylesheets/jquery-ui/jquery-ui.js")" ></script>
        <link rel="stylesheet" href="@routes.Assets.at("stylesheets/jquery-ui/jquery-ui.css")">
        <link rel="stylesheet" media="screen" href="@routes.Assets.at("stylesheets/userprofile.css")">
        <script src="@routes.Assets.at("javascripts/jquery.bracket.min.js")" type="text/javascript"></script>
        <link rel="stylesheet"  href="@routes.Assets.at("stylesheets/jquery.bracket.min.css")">
       
        
        
        
        
        
       @Templates.facebookHeadScript()

    </head>
    <body>
    
                <div id="dialog-form" title="Upload profile picture">

                    <form id= "picupload" action="@routes.UserProfileDatabase.savePicture()" method ="post" data-ajax="false" enctype="multipart/form-data" >
                    <input id="picfield" name="picture" type="file" accept="image/*;capture=camera" Style="margin-top:20%">

                  </form>
                </div>
                
                
        <div data-role="page" data-theme="b">

            <div data-role="header">
                @Templates.header()
            </div>
        
            <div data-role="content">   
             

              <h1 align="center">My Profile</h1>
              
               <div data-role="collapsible" class="ui-icon-alt" data-collapsed-icon="arrow-r" data-inline="true" data-expanded-icon="arrow-d" data-iconpos="right"  >
               
               <h3 id="displayedit" class = "custom-centercollheader" >Edit Profile</h3>
                <div class="section" Style="border:none">
                <div class="divLayoutcontact" Style = "width:20%" Style = "heigth:100%">
                
                   <img src="/profilepic/@profile.username" id="avatarpic" style="height:100px!important" style="width:100px!important">
   
          
                 <button data-role = "button" id="upload" style="width:95%" data-icon="camera">Upload pic</button>
                 <button data-role = "button" id="delete" style="width:95%" data-icon="delete">Delete pic</button>   
                    
                </div>
                    
                <div class="divLayoutcontact" Style = "width:80%">
                  <form name="contactInfoGenerate" >
                    <div data-role="fieldcontain">
                      <label for="username">Username:</label>
                      <input disabled type="text" name="username" id="username" maxlength="30" value="@profile.username" >  
                      <label for="skypeID">Skype:</label>
                      <input type="text" name="skypeID" id="skypeID" maxlength="30" value="@profile.skypeID" placeholder="Skype">
                      <label for="battlenetID">Battle.net:</label>
                      <input type="text" name="battlenetID" id="battlenetID" maxlength="30" value="@profile.battlenetID" placeholder="Battle.net">
                      <label for="steamID">Steam:</label>
                      <input type="text" name="steamID" id="steamID" maxlength="30" value="@profile.steamID" placeholder="Steam">
                      <label for="twitchID">Twitch:</label>
                      <input type="text" name="twitchID" id="twitchID" maxlength="30" value="@profile.twitchID" placeholder="Twitch">
                      <label for="uplayID">UPlay:</label>
                      <input  type="text" name="uplayID" id="uplayID" maxlength="30" value="@profile.uplayID" placeholder="UPlay">                    
                    </div>
                    </form>
                      
                  
                </div>
              </div>
              <div class="section" >
                <div data-role="fieldcontain">
                  <label for="favouritegames">Favourite Games:</label>
                  <textarea cols="40" rows="8" name="favouritegames" id="favouritegames" placeholder="Favourite Games"></textarea>
                </div>
              </div>
         
              <div class="section">   
                <div data-role="fieldcontain">
                  <label for="about">About:</label>
                  <textarea cols="40" rows="8" name="about" id="about" placeholder="About"></textarea>
                   <div Style="float:right"><input type="button" value="Save" id="save"  data-mini="true"></div>
                </div> 
              </div>
               </div>
               
               <div id="displayuser">
              <div class="section" Style="border:none">
                
                <div class="divLayoutcontact" Style = "width:20%" Style = "heigth:100%">
                  <img src="/profilepic/@profile.username" id="avatarpic" style="height:100px!important" style="width:100px!important">
                </div>
                
                <div class="divLayoutcontact" Style = "width:80%">
                           <div data-role="fieldcontain">
                      <label for="username">Username:</label>
                      <input readonly type="text" name="username" id="username" maxlength="30" value="@profile.username" >  
                      <label for="skypeID">Skype:</label>
                      <input readonly type="text" name="skypeID" id="skypeID" maxlength="30" value="@profile.skypeID" placeholder="Skype">
                      <label for="battlenetID">Battle.net:</label>
                      <input readonly type="text" name="battlenetID" id="battlenetID" maxlength="30" value="@profile.battlenetID" placeholder="Battle.net">
                      <label for="steamID">Steam:</label>
                      <input readonly type="text" name="steamID" id="steamID" maxlength="30" value="@profile.steamID" placeholder="Steam">
                      <label for="twitchID">Twitch:</label>
                      <input readonly type="text" name="twitchID" id="twitchID" maxlength="30" value="@profile.twitchID" placeholder="Twitch">
                      <label for="uplayID">UPlay:</label>
                      <input readonly type="text" name="uplayID" id="uplayID" maxlength="30" value="@profile.uplayID" placeholder="UPlay">       
                    </div>
                      
                        
                  
                  </div>
                </div>
                
                <div class="section">
                  <div data-role="fieldcontain">
                    <label for="favouritegames">Favourite Games:</label>
                    <textarea readonly cols="40" rows="8" name="favouritegames" id="favouritegames" placeholder="Favourite Games"></textarea>
                  </div>      
                </div>
         

                <div class="section">
                  <div data-role="fieldcontain">
                    <label for="about">About:</label>
                    <textarea readonly cols="40" rows="8" name="about" id="about" placeholder="About"></textarea>
                  </div> 
                </div>





                  <div class="section">
                    <label for="joinedT">Joined ETournaments:</label>
                    <div class ="flowBox" id="joinedT">
                        <ul data-role="listview" data-inset="true" data-dividertheme="a" data-theme = "b"> 
                        @for(tournament <- tournament) {
                            <li  data-role = "list-divider" ></li>
                                <li><a data-role = "button"  rel="external"  href="/showtournament/@tournament.tournamentID" class = "greyBtn"><img src="@routes.Assets.at("images/sun.jpg")" alt="Dreamhack" class = "fullscreen"  /><h2>@{"Name: " + tournament.tournamentname}</h2> <p>@{" Size: " +  tournament.participant_count }</p></a>
                            </li>
                        } 
                        </ul>
                    </div> 
                  </div>





           </div>
      <script>

      
        $("#save").click(function() {
          $.ajax({
                url: "/edituserprofile",
                type: 'POST',
                contentType:'application/json',
                data: JSON.stringify({skypeID: $('#skypeID').val(), battlenetID: $('#battlenetID').val(), steamID: $('#steamID').val(), twitchID: $('#twitchID').val(), uplayID: $('#uplayID').val(), favouritegames: $('#favouritegames').val(), about: $('#about').val()}),
                dataType : 'html',
                success: function(){
                    window.location.replace(document.URL);
                }
          });
        });
        
        $('#displayedit').click(function() {
         $('#displayuser').toggle();
         
        });
     
        
       
        var dialog = $( "#dialog-form" ).dialog({
              autoOpen: false,
              height: 300,
              width: 350,
              modal: true,
              buttons: {
                "Upload picture": upload,
                Cancel: function() {
                dialog.dialog( "close" );
                }
                },
                close: function() {
                
              }
            });
            
       function upload() {
                $('#picupload').submit();
                }
            
        $("#upload").click(function() {
            event.preventDefault();
           
             
            dialog.dialog( "open" );
            
            
        });
        
        $("#delete").click(function() {
            $.ajax({
                url: "/deleteprofilepicture",
                type: 'POST',
                success: function(){
                    window.location.replace(document.URL);
                }
            });
        });
      </script>
            
            </div>
            @Templates.footer()
            @Templates.panelAndLogOut()
            <script>
                $('#user').removeClass('ui-alt-icon');
                $('#mail').addClass('ui-alt-icon');
                $('#h').addClass('ui-alt-icon');
          </script>
        </div>
        @Templates.jsDisabled()
    </body>
</html>